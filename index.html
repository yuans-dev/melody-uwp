<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="style.css" />
    <link rel="icon" type="image/x-icon" href="img/logo.png" />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200"
    />
    <title>Melody</title>
  </head>
  <body>
    <div class="navbar" id="navbar">
      <div class="alignleft" id="alignleft">
        <button class="menubutton" id="menu">
          <span class="material-symbols-outlined">menu</span>
        </button>
        <ul class="navlinks" id="navlinks">
          <li>
            <a class="selected" id="homelink"
              ><span id="homeicon" class="material-symbols-outlined">home</span>
              <h3 id="hometext">home</h3></a
            >
          </li>
          <li>
            <a id="aboutlink"><h3>about</h3></a>
          </li>
          <li>
            <a id="author-btn">
              <h3><nobr>yuans-dev</nobr></h3>
            </a>
          </li>
          <li id="navdownload-btn">
            <button class="navdownload-btn">
              <h2>releases</h2>
            </button>
          </li>
          <li>
            <a
              id="releasescompact"
              class="releasescompact"
              href="https://github.com/yuans-dev/melody-uwp/releases"
              ><h3>releases</h3></a
            >
          </li>
          <li>
            <a
              id="githubcompact"
              class="githubcompact"
              href="https://github.com/yuans-dev/melody-uwp"
              ><h3>github</h3></a
            >
          </li>
        </ul>
      </div>

      <div class="alignright" id="alignright">
        <button class="github-btn" id="github-btn">
          <h2>github <span class="material-symbols-outlined">code</span></h2>
        </button>
      </div>
    </div>
    <section id="herobanner" class="herobanner">
      <div class="parallax">
        <div class="content">
          <div>
            <img id="melodylogo" src="img/fulllogo.svg" alt="melody" />
            <h4>Sail the seven seas with style.</h4>
          </div>
          <br />
          <button class="pbutton" id="download-btn">
            <span class="material-symbols-outlined">download</span>
            <h2>Download</h2>
          </button>
        </div>
      </div>
    </section>

    <section id="about" class="about">
      <div class="content">
        <hr />
        <div>
          <h2>what is Melody?</h2>
          <p>
            Melody is a
            <a
              class="link"
              href="https://learn.microsoft.com/en-us/windows/uwp/get-started/universal-application-platform-guide"
              >Universal Windows Platform (UWP)</a
            >
            application that lets you pirate YouTube video and audio.
          </p>
        </div>
        <hr />
        <div>
          <h2>how does it work?</h2>
          <p>
            Melody uses the
            <a class="link" href="https://github.com/Tyrrrz/YoutubeExplode"
              >YouTubeExplode library by Tyrrrz</a
            >
            which scrapes raw page data and intercepts internal endpoints to
            resolve download links.
          </p>
        </div>
      </div>
    </section>

    <script>
      const menubutton = document.getElementById("menu");
      const navigation = document.getElementById("navlinks");
      const navbar = document.getElementById("navbar");

      const homeicon = document.getElementById("homeicon");
      const hometext = document.getElementById("hometext");
      const githubbtn = document.getElementById("github-btn");
      const navdownloadbtn = document.getElementById("navdownload-btn");
      const downloadbtn = document.getElementById("download-btn");
      const authorbtn = document.getElementById("author-btn");
      const aboutbutton = document.getElementById("aboutlink");
      const aboutcontent = document.getElementById("about");
      const homebutton = document.getElementById("homelink");
      const homecontent = document.getElementById("herobanner");
    </script>
    <script>
      githubbtn.addEventListener("click", function () {
        window.location.href = "https://github.com/yverci/melody-uwp";
      });
      navdownloadbtn.addEventListener("click", function () {
        window.location.href = "https://github.com/yverci/melody-uwp/releases";
      });
      downloadbtn.addEventListener("click", function () {
        window.location.href =
          "https://github.com/yuans-dev/melody-uwp/releases/latest/download/melody.zip";
      });
      authorbtn.addEventListener("click", function () {
        window.location.href = "https://yuans-dev.github.io";
      });
      aboutbutton.addEventListener("click", function () {
        removeSelectedFromAll();
        aboutbutton.classList.add("selected");
        aboutcontent.scrollIntoView({
          behavior: "smooth",
        });
      });

      homebutton.addEventListener("click", function () {
        removeSelectedFromAll();
        homebutton.classList.add("selected");
        homecontent.scrollIntoView({
          behavior: "smooth",
        });
      });
      menubutton.addEventListener("click", function () {
        if (navigation.classList.contains("collapsewidth")) {
          navigation.classList.remove("collapsewidth");
        } else {
          navigation.classList.add("collapsewidth");
        }
      });
      window.onload = toggleCompactMode;
      window.onresize = toggleCompactMode;
      window.onscroll = function () {
        if (isInViewport(homecontent)) {
          removeSelectedFromAll();
          homebutton.classList.add("selected");
        } else if (isInViewport(aboutcontent)) {
          removeSelectedFromAll();
          aboutbutton.classList.add("selected");
        }
      };
      function removeSelectedFromAll() {
        if (homebutton.classList.contains("selected")) {
          homebutton.classList.remove("selected");
        } else {
          aboutbutton.classList.remove("selected");
        }
      }
      function isInViewport(elem, offset = 0) {
        const bounding = elem.getBoundingClientRect();
        return (
          bounding.top >= 0 &&
          bounding.bottom <=
            (window.innerHeight || document.documentElement.clientHeight) +
              offset
        );
      }
      function toggleCompactMode() {
        var navbarrect = navbar.getBoundingClientRect();
        //console.log(navbarrect.width);
        if (navbarrect.width <= 600) {
          navbar.classList.add("compact");
          hometext.style.display = "none";
          homeicon.style.display = "flex";
        } else {
          navbar.classList.remove("compact");
          homeicon.style.display = "none";
          hometext.style.display = "flex";
        }
      }
    </script>
  </body>
</html>
